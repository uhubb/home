<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Launcher - Unblocker Hub</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<style>
:root{--glass-bg:rgba(255,255,255,0.06);--muted:#cbd5e1;--accent:#ffcc00}
*{box-sizing:border-box}html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;color:#fff}
body{background:url('bg.png') center/cover no-repeat fixed;background-color:#071025}
.overlay{position:fixed;inset:0;background:rgba(6,8,12,0.45);z-index:0}

/* topbar */
.topbar-wrap{position:fixed;left:50%;top:36px;transform:translateX(-50%);z-index:60}
nav.topbar{display:inline-flex;align-items:center;gap:18px;padding:10px 22px;border-radius:999px;background:var(--glass-bg);backdrop-filter:blur(8px) saturate(150%) brightness(1.12);border:1px solid rgba(255,255,255,0.14);height:56px}
.topbar-link{color:#fff;text-decoration:none;font-weight:600;padding:6px 12px;border-radius:12px;transition:all .18s ease}
.topbar-link.active{background:rgba(255,204,0,0.12);color:var(--accent)}

/* logo */
.logo{position:fixed;width:64px;height:64px;border-radius:16px;background:rgba(255,255,255,0.06);backdrop-filter:blur(10px) brightness(1.12);border:1px solid rgba(255,255,255,0.14);box-shadow:0 10px 30px rgba(0,0,0,0.5);z-index:70;display:flex;align-items:center;justify-content:center;overflow:hidden}

/* container */
.container{max-width:1000px;margin:140px auto 60px;padding:20px;z-index:10;position:relative;display:flex;flex-direction:column;gap:18px;align-items:center}
.card{width:100%;background:var(--glass-bg);border:1px solid rgba(255,255,255,0.12);border-radius:16px;padding:18px;box-shadow:0 20px 50px rgba(2,6,23,0.6)}

/* title and iframe box */
.title{font-size:22px;color:var(--accent);margin-bottom:8px}
.iframe-wrap{width:100%;height:600px;background:#000;border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,0.04)}

/* buttons row */
.row{display:flex;gap:12px;align-items:center;width:100%}
.btn{padding:12px 18px;border-radius:12px;border:none;cursor:pointer;font-weight:700;transition:transform .18s,box-shadow .18s}
.btn.play{background:linear-gradient(90deg,#2dd36f,#21c26f);color:#021;box-shadow:0 8px 25px rgba(0,0,0,0.4)}
.btn.full{background:linear-gradient(90deg,#ff6fb0,#ff3ea1);color:#fff;box-shadow:0 8px 25px rgba(0,0,0,0.4)}
.btn:hover{transform:translateY(-4px);box-shadow:0 14px 40px rgba(0,0,0,0.6)}
.small{font-size:13px;color:var(--muted)}
.back{margin-left:auto;padding:8px 12px;border-radius:10px;background:rgba(255,255,255,0.03);color:#fff;border:1px solid rgba(255,255,255,0.06)}
</style>
</head>
<body>
<div class="overlay"></div>

<img src="https://via.placeholder.com/120x120?text=Logo" class="logo" id="siteLogo" alt="logo">
<div class="topbar-wrap"><nav class="topbar" id="topbar"></nav></div>

<div class="container">
  <div class="card">
    <div class="title" id="gTitle">Loading game...</div>

    <div class="row">
      <button class="btn play" id="btnPlay">CLICK TO PLAY</button>
      <button class="btn full" id="btnFull">FULLSCREEN</button>
      <button class="back" id="btnBack">Back</button>
      <div style="flex:1"></div>
      <div class="small" id="gPath"></div>
    </div>

    <div style="height:12px"></div>
    <div class="iframe-wrap" id="iframeContainer" aria-hidden="true"></div>
  </div>
</div>

<script>
const storage = window.localStorage;
let games = JSON.parse(storage.getItem('games')||'[]');
let topbar = JSON.parse(storage.getItem('topbar')||'null');
if(!topbar){ topbar = [{label:'Home',href:'index.html'},{label:'Apps',href:'#apps'}]; storage.setItem('topbar', JSON.stringify(topbar)); }

function renderTopbar(){ const tb=document.getElementById('topbar'); tb.innerHTML=''; topbar.forEach((t,i)=>{ const a=document.createElement('a'); a.href=t.href||'#'; a.className='topbar-link' + (i===0?' active':''); a.innerText=t.label; tb.appendChild(a); }); }
renderTopbar();

/* position logo */
function positionLogo(){
  const logo = document.getElementById('siteLogo');
  const tb = document.querySelector('.topbar-wrap .topbar');
  if(!tb) return;
  const rect = tb.getBoundingClientRect();
  logo.style.left = (rect.left + window.scrollX - (logo.offsetWidth + 12)) + 'px';
  logo.style.top = (rect.top + window.scrollY + (rect.height/2) - (logo.offsetHeight/2)) + 'px';
}
const storedLogo = storage.getItem('siteLogo');
if(storedLogo) document.getElementById('siteLogo').src = storedLogo;
window.addEventListener('load', positionLogo);
window.addEventListener('resize', positionLogo);

/* which game */
const params = new URLSearchParams(location.search);
const idx = params.get('game');
const game = (games && games[idx]) ? games[idx] : null;

if(!game){
  document.getElementById('gTitle').innerText = 'Game not found';
} else {
  document.getElementById('gTitle').innerText = game.name || 'Untitled';
  document.getElementById('gPath').innerText = game.file || game.url || '';
  document.getElementById('btnPlay').addEventListener('click', ()=>{
    const container = document.getElementById('iframeContainer');
    container.innerHTML = `<iframe src="${game.file || game.url}" style="width:100%;height:100%;border:0"></iframe>`;
    container.setAttribute('aria-hidden','false');
  });
  document.getElementById('btnFull').addEventListener('click', ()=>{
    window.open(game.file || game.url, '_blank');
  });
}

/* back */
document.getElementById('btnBack').addEventListener('click', ()=> history.back());

/* react to control panel updates */
window.addEventListener('storage', (e)=>{ if(e.key && e.key.startsWith('uh_reload_')){ games = JSON.parse(storage.getItem('games')||'[]'); topbar = JSON.parse(storage.getItem('topbar')||'[]') ; renderTopbar(); positionLogo(); }});
</script>
</body>
</html>
